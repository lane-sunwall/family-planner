<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Family Weekly Planner</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
      line-height: 1.6;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    h1, h2, h3, h4 {
      color: #4a5568;
    }
    input, textarea {
      font-family: inherit;
      font-size: 1rem;
      width: 100%;
      margin-bottom: 10px;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    textarea {
      resize: vertical;
    }
    label {
      font-weight: bold;
      display: block;
      margin: 10px 0 5px;
    }
    .header {
      background: white;
      border-radius: 15px;
      padding: 30px;
      margin-bottom: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
    }
    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
    }
    .week-info {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 15px;
      align-items: center;
    }
    .week-input label {
      margin-right: 8px;
    }
    .fun-activity-tracker {
      background: #fef5e7;
      border: 2px solid #f6ad55;
      border-radius: 10px;
      padding: 10px 20px;
      font-weight: bold;
      color: #dd6b20;
    }
    .btn {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 25px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s ease;
      margin: 5px;
    }
    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    .day-planning {
      background: white;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    }
    .optional-section {
      background: #f0f4f8;
      border-radius: 10px;
      padding: 20px;
      margin-top: 30px;
    }
    .chore-template-box {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 15px;
      margin: 20px 0;
    }

    /* Print mode */
    @media print {
      body {
        background: white;
        color: black;
        font-family: "Calibri", sans-serif;
        font-size: 11pt;
      }
      .container {
        max-width: 100%;
        padding: 0.5in 0.7in;
      }
      .btn,
      .chore-template-box,
      .fun-activity-tracker,
      .header {
        display: none !important;
      }
      input, textarea {
        border: none;
        outline: none;
        resize: none;
        box-shadow: none;
        background: transparent;
        font-size: 11pt;
        width: 100%;
        overflow: visible !important;
        height: auto !important;
        min-height: 1em;
      }
      textarea {
        white-space: pre-wrap;
      }
      .day-planning, .planning-section {
        page-break-inside: avoid;
        margin-bottom: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ¡ Family Weekly Planner</h1>
      <div class="week-info">
        <div class="week-input">
          <label for="weekOf">Week of:</label>
          <input type="date" id="weekOf" onchange="updateWeekDates()" />
        </div>
        <div class="fun-activity-tracker">
          ğŸ‰ Next Fun Activity Chooser: <span id="activityChooser">Hannah</span>
        </div>
      </div>
    </div>

    <!-- Weekly Overview Section -->
    <div class="planning-section">
      <h2>ğŸ“‹ Weekly Overview & Goals</h2>
      <div class="weekly-overview">
        <div>
          <label>Last Week's Wins ğŸ†</label>
          <textarea id="lastWeekWins" rows="3" placeholder="What went well last week?"></textarea>
        </div>
        <div>
          <label>ğŸ§  Family Reflection Prompt</label>
          <p id="reflectionPrompt" style="font-weight: bold; font-size: 1.05em; margin: 5px 0;"></p>
          <textarea id="weeklyReflection" rows="3" placeholder="Write your thoughts here..."></textarea>
        </div>
        <div>
          <label>This Week's Family Goals ğŸ¯</label>
          <textarea id="weeklyGoals" rows="3" placeholder="What do we want to focus on this week?"></textarea>
        </div>
        <div>
          <label>Weekly Budget for Activities ğŸ’°</label>
          <input type="number" id="weeklyBudget" placeholder="$0" />
        </div>
        <div>
          <label>Weather Considerations ğŸŒ¤ï¸</label>
          <textarea id="weatherNotes" rows="3" placeholder="Any weather-related plans or backup ideas?"></textarea>
        </div>
      </div>
    </div>

    <!-- Placeholder: Day-by-day planner will go below -->
    <!-- Daily Planning Section -->
    <div id="dailyPlanning">
      <!-- Loop through days -->
      <script>
        const daysOfWeek = [
          "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"
        ];

        document.addEventListener("DOMContentLoaded", () => {
          const dailyPlanningDiv = document.getElementById("dailyPlanning");

          daysOfWeek.forEach((day, i) => {
            const dayId = day.toLowerCase();
            const isFunDay = day === "Friday" || day === "Saturday";

            const defaultCheckboxes = "â˜\nâ˜\nâ˜\nâ˜";
            const dayBlock = document.createElement("div");
            dayBlock.className = "day-planning";
            let choresText = defaultCheckboxes;
            if (["Monday", "Wednesday", "Friday"].includes(day)) {
              choresText = "â˜ Hannah - empty dishwasher\nâ˜ Hannah - set table for supper\nâ˜\nâ˜";
            } else if (["Tuesday", "Thursday", "Saturday"].includes(day)) {
              choresText = "â˜ Benson - empty dishwasher\nâ˜ Benson - set table for supper\nâ˜\nâ˜";
            }

            dayBlock.innerHTML = `
              <h3>${day} <span id="${dayId}Date"></span></h3>
              <div>
                <label>ğŸŒ… Morning</label>
                <textarea id="${dayId}-morning">${defaultCheckboxes}</textarea>
              </div>
              <div>
                <label>â˜€ï¸ Afternoon</label>
                <textarea id="${dayId}-afternoon">${defaultCheckboxes}</textarea>
              </div>
              <div>
                <label>ğŸŒ™ Evening</label>
                <textarea id="${dayId}-evening">${defaultCheckboxes}</textarea>
              </div>
              <div>
                <label>ğŸ§¹ Chores</label>
                <textarea id="${dayId}-chores">${choresText}</textarea>
              </div>
              <div>
                <label>ğŸ’ª Exercise</label>
                <textarea id="${dayId}-exercise">${defaultCheckboxes}</textarea>
              </div>
              <div>
                <label>ğŸ½ï¸ Supper</label>
                <input type="text" id="${dayId}-supper" />
              </div>
              ${isFunDay ? `
              <div>
                <label>ğŸ‰ Fun Family Activity</label>
                <textarea id="${dayId}-fun">${defaultCheckboxes}</textarea>
              </div>` : ''}
            `;
            dailyPlanningDiv.appendChild(dayBlock);
          });
        });
      </script>
    </div>
<script>
  const familyMembers = ['Hannah', 'Benson', 'Even', 'Lane', 'Christina', 'Holly', 'Lauren'];

function updateWeekDates() {
  const weekOfInput = document.getElementById('weekOf');
  if (!weekOfInput || !weekOfInput.value) return;

  // Always treat selected date as Monday
  const [year, month, day] = weekOfInput.value.split('-').map(Number);
  const monday = new Date(year, month - 1, day);

  const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday'];
  days.forEach((day, index) => {
    const date = new Date(monday);
    date.setDate(monday.getDate() + index);
    const display = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
    const span = document.getElementById(`${day}Date`);
    if (span) span.textContent = display;
  });
}

  function updateActivityChooser() {
    const input = document.getElementById("weekOf");
    const chooser = document.getElementById("activityChooser");
    if (!input || !input.value || !chooser) return;
  
    const familyOrder = ['Hannah', 'Benson', 'Even', 'Christina', 'Lane', 'Holly', 'Lauren'];
    const startDate = new Date(input.value);
    const baseDate = new Date("2025-01-01"); // reference Monday
    const weekNumber = Math.floor((startDate - baseDate) / (1000 * 60 * 60 * 24 * 7));
    const chooserIndex = weekNumber % familyOrder.length;
  
    chooser.textContent = familyOrder[chooserIndex];
  }

  function saveWeekData() {
    const data = {
      weekOf: document.getElementById('weekOf')?.value || '',
      chooserIndex: currentActivityChooser
    };
    localStorage.setItem('familyPlannerMeta', JSON.stringify(data));
  }

  function loadWeekData() {
    try {
      const raw = localStorage.getItem('familyPlannerMeta');
      if (!raw) return;
      const saved = JSON.parse(raw);
      if (saved.weekOf) {
        document.getElementById('weekOf').value = saved.weekOf;
        updateWeekDates();
      }
      if (saved.chooserIndex !== undefined) {
        currentActivityChooser = saved.chooserIndex;
        updateActivityChooser();
      }
    } catch (e) {
      console.log('No prior data to load');
    }
  }

  function planNextWeek() {
    currentActivityChooser = (currentActivityChooser + 1) % familyMembers.length;
    updateActivityChooser();

    const inputs = document.querySelectorAll('textarea, input[type="text"]');
    inputs.forEach(input => input.value = '');

    const dateInput = document.getElementById('weekOf');
    if (dateInput && dateInput.value) {
      const date = new Date(dateInput.value);
      date.setDate(date.getDate() + 7);
      dateInput.value = date.toISOString().split('T')[0];
    }

    updateWeekDates();
    saveWeekData();
    alert(`ğŸ‰ ${familyMembers[currentActivityChooser]} is choosing next weekâ€™s fun activities!`);
  }

  window.addEventListener('DOMContentLoaded', () => {
    loadWeekData();
    updateActivityChooser();
    updateWeekDates();
  });
</script>
<script>
 function generateWordDoc() {
  const weekStart = document.getElementById('weekOf').value;
  if (!weekStart) {
    alert("Please select a 'Week Of' date first.");
    return;
  }

  const [year, month, day] = weekStart.split('-').map(Number);
  const start = new Date(year, month - 1, day); // Always treat as Monday
  const days = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
  const parts = [];

  // Add Weekly Overview
  const overviewSections = [
    { id: 'lastWeekWins', label: "Last Week's Wins ğŸ†" },
    { id: 'reflectionPrompt', label: "Family Reflection Prompt ğŸ§ ", isPrompt: true },
    { id: 'weeklyReflection', label: "Reflection Response" },
    { id: 'weeklyGoals', label: "This Week's Family Goals ğŸ¯" },
    { id: 'weeklyBudget', label: "Weekly Budget for Activities ğŸ’°" },
    { id: 'weatherNotes', label: "Weather Considerations ğŸŒ¤ï¸" }
  ];
  
  parts.push('<h1>ğŸ“‹ Weekly Overview & Goals</h1>');
  
  overviewSections.forEach(({ id, label, isPrompt }) => {
    const el = document.getElementById(id);
    if (!el) return;
  
    const value = isPrompt ? el.textContent : el.value;
    if (value && value.trim()) {
      parts.push(`<p><strong>${label}:</strong> ${value.trim()}</p>`);
    }
  });
  
  // Now continue with daily schedule
  days.forEach((day, i) => {
    const key = day.toLowerCase();
    const date = new Date(start);
    date.setDate(start.getDate() + i);
    const formattedDate = date.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' });

    parts.push(`<h1>${day}</h1><p><strong>${formattedDate}</strong></p>`);
    ['morning', 'afternoon', 'evening', 'chores', 'exercise', 'dinner', 'fun'].forEach(section => {
      const el = document.getElementById(`${key}-${section}`);
      if (!el) return;
    
      const labelMap = {
        morning: "ğŸŒ… Morning",
        afternoon: "â˜€ï¸ Afternoon",
        evening: "ğŸŒ™ Evening",
        chores: "ğŸ§¹ Chores",
        exercise: "ğŸ’ª Exercise",
        dinner: "ğŸ½ï¸ Supper",
        fun: "ğŸ‰ Fun Family Activity"
      };

  const value = el.value?.trim();
  if (value) {
    parts.push(`<p><strong>${labelMap[section] || section}:</strong><br>${value.replace(/\n/g, "<br>")}</p>`);
  }
});

    const html = `
     <html xmlns:o='urn:schemas-microsoft-com:office:office' 
        xmlns:w='urn:schemas-microsoft-com:office:word' 
        xmlns='http://www.w3.org/TR/REC-html40'>
      <head>
        <meta charset='utf-8'>
        <title>Family Planner</title>
        <style>
          @page {
            margin: 0.7in;
          }
          body {
            font-family: "Calibri", sans-serif;
            font-size: 11pt;
          }
          h1 {
            font-size: 16pt;
            margin-bottom: 0.2in;
          }
          p {
            margin-bottom: 0.1in;
          }
        </style>
      </head>
      <body>${parts.join('')}</body>
    </html>
    `;

    const blob = new Blob([html], { type: 'application/msword' });
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);

    const weekLabel = new Date(weekStart).toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
    link.download = `Family-Planner-Week-${weekLabel}.doc`;

    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  }

</script>
    <script>
  const reflectionPrompts = [
    "What was the best part of your week?",
    "What was the hardest thing you had to do this week?",
    "Whatâ€™s something that made you laugh this week?",
    "Whatâ€™s one thing youâ€™re thankful for right now?",
    "Whatâ€™s something new you tried (or want to try)?",
    "What made you feel proud this week?",
    "Did anything make you feel frustrated or annoyed?",
    "What was your favorite moment with family this week?",
    "Whatâ€™s one thing you learned this week?",
    "If this week were a weather forecast, what would it be?",
    "Who helped you this week, and how?",
    "Whatâ€™s one thing you wish had gone differently this week?",
    "What was your energy like most of the week â€” high, low, or in-between?",
    "What made you feel loved or appreciated?",
    "Whatâ€™s something youâ€™re looking forward to next week?",
    "If this week had a soundtrack, what song would be on it?",
    "Whatâ€™s one thing youâ€™d like to do better next week?",
    "Whatâ€™s something that surprised you this week?",
    "Whatâ€™s a small moment you want to remember?",
    "If you could give your week a title, what would it be?"
  ];

  function setWeeklyPrompt() {
    const input = document.getElementById("weekOf");
    if (!input || !input.value) return;

    const startDate = new Date(input.value);
    const baseDate = new Date("2025-01-01");
    const weekNumber = Math.floor((startDate - baseDate) / (1000 * 60 * 60 * 24 * 7));
    const promptIndex = weekNumber % reflectionPrompts.length;

    const promptEl = document.getElementById("reflectionPrompt");
    if (promptEl) promptEl.textContent = reflectionPrompts[promptIndex];
  }

  document.addEventListener("DOMContentLoaded", () => {
    const input = document.getElementById("weekOf");
    if (input) {
      input.addEventListener("change", () => {
        setWeeklyPrompt();
        updateWeekDates();
        updateActivityChooser();
      });
      setWeeklyPrompt();
      updateWeekDates();
      updateActivityChooser();
    }
  });
</script>
    <!-- Action Buttons -->
    <div style="margin: 40px 0; text-align: center;">
      <button class="btn" onclick="generateWordDoc()">ğŸ“„ Export to Word</button>
      <button class="btn" onclick="planNextWeek()">ğŸ”„ Plan Next Week</button>
      <button class="btn" onclick="window.print()">ğŸ–¨ï¸ Print This Page</button>
    </div>
  </div> <!-- Close .container -->
</body>
</html>
